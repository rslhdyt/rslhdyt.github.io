<!DOCTYPE html> <html lang="en" class="h-full"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LTH48DE8D"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2LTH48DE8D'); </script> <meta charset="utf-8"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=author content="Risal Hidayat"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Rails Email Preview | Risal Hidayat</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Rails Email Preview" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Previewing your mailer class in rails" /> <meta property="og:description" content="Previewing your mailer class in rails" /> <link rel="canonical" href="https://rslhdyt.dev/rails-email-preview/" /> <meta property="og:url" content="https://rslhdyt.dev/rails-email-preview/" /> <meta property="og:site_name" content="Risal Hidayat" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2023-09-05T17:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Rails Email Preview" /> <meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-05T17:00:00+00:00","datePublished":"2023-09-05T17:00:00+00:00","description":"Previewing your mailer class in rails","headline":"Rails Email Preview","mainEntityOfPage":{"@type":"WebPage","@id":"https://rslhdyt.dev/rails-email-preview/"},"url":"https://rslhdyt.dev/rails-email-preview/"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="https://rslhdyt.dev/assets/images/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="https://rslhdyt.dev/assets/images/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="https://rslhdyt.dev/assets/images/favicon/favicon-16x16.png"> <link rel="manifest" href="https://rslhdyt.dev/site.webmanifest"> <link rel="alternate" type="application/rss+xml" title="Risal Hidayat" href="https://rslhdyt.dev/feed.xml" /> <script src="https://kit.fontawesome.com/d9b09040a7.js" crossorigin="anonymous"></script> <!-- highlight.js --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css" integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script> <script>hljs.highlightAll();</script> <link rel="stylesheet" href="/assets/css/main.css"> </head> <body class="bg-zinc-50 flex h-full"> <div class="max-w-[600px] flex flex-col mx-auto w-11/12"> <nav class=" mt-7 md:mt-10 mb-10"> <ul class="flex flex-row justify-center space-x-6 text-l text-gray-500"> <li> <a href="https://rslhdyt.dev/">Home</a> </li> <li> <a href="https://rslhdyt.dev/blog">Blog</a> </li> <li class="item hidden sm:block"> <a href="https://rslhdyt.dev/code_snippet">Code Snippet</a> </li> <li> <a href="https://rslhdyt.dev/projects">Projects</a> </li> <li> <a href="https://rslhdyt.dev/about">About</a> </li> </ul> </nav> <h1 class="text-3xl text-center tracking-tight font-bold mb-5">Rails Email Preview</h1> <span class="block text-center mb-5"> <time datetime="05-09-2023">Tuesday. September 05, 2023</time> - <span class="reading-time" title="Estimated read time"> 1 min read </span> </span> <div class="flex flex-row space-x-1.5 justify-center mb-10"> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/rails">rails</a> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/email">email</a> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/testing">testing</a> </div> <div class="posts"> <p>When working with features that need to send an email, sometimes we find out that testing the email content is a little bit painful. Usually, we will call the function that sends the email and inspect the email content and view it through a development mail server such as mailcatcher or mailtrap. Most of the time we donâ€™t want to go through all processes to only see the email body.</p> <p>Luckily, Rails has a feature to preview your email mailer without having to use the email server at all. In this tutorial, I will explain how to set up a mailer preview in the Rails framework.</p> <p>Letâ€™s assume we already have a mailer class like this one.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="no">ApplicationMailer</span>
  <span class="k">def</span> <span class="nf">welcome</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
    <span class="n">mail</span><span class="p">(</span><span class="ss">to: </span><span class="n">user</span><span class="p">.</span><span class="nf">email</span><span class="p">,</span> <span class="ss">subject: </span><span class="s1">'Welcome!'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Hi</span> <span class="o">&lt;</span><span class="sx">%= @user.full_name %&gt;
&lt;br&gt;&lt;br&gt;
Welcome to the club!
</span></code></pre></div></div> <p><br /></p> <p>In order to enable the email preview for user mailer, we need to create user mailer preview class in <code class="language-plaintext highlighter-rouge">test/mailers/previews</code> directory.</p> <blockquote> <p>ðŸ’¡ if you are using rspec as testing framework, usually the directory is inside the spec folder <code class="language-plaintext highlighter-rouge">spec/mailers/previews</code>.</p> </blockquote> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserMailerPreview</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Preview</span>
  <span class="k">def</span> <span class="nf">welcome</span>
    <span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">first</span>

    <span class="no">UserMailer</span><span class="p">.</span><span class="nf">welcome</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
	<span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Then, you can check the email preview by accessing this url in your local url development. <code class="language-plaintext highlighter-rouge">[http://localhost:3000/rails/mailer](http://localhost:3000/rails/mailer)</code> . Make sure your local development server are running.</p> <p>If everything goes right, you will see the list available email preview like this.</p> <p><img src="/assets/images/posts/7f7cdfba-29b7-45bc-8e98-dde02f4864bd-Untitled.png" alt="" /></p> <p><em></em></p> <p>And if you click the welcome email preview it will show the preview of user mailer welcome.</p> <p><img src="/assets/images/posts/745e2fef-1c12-4aa5-93ef-5ed5cdb0d837-Untitled.png" alt="" /></p> <p><em></em></p> <p>Voila, thatâ€™s all. I hope this tutorial will make you more productive when working with a feature with an email.</p> <hr /> <p>sources:</p> <ul> <li><a href="https://guides.rubyonrails.org/action_mailer_basics.html#previewing-emails">https://guides.rubyonrails.org/action_mailer_basics.html#previewing-emails</a></li> </ul> </div> <div class="grid grid-cols-2 text-sm"> <a class="prev"></a> <a class="next" href="https://rslhdyt.dev/rails-rake-task-hooks/">Rails - Rake Task Hooks &raquo;</a> </div> <div class="related"> <h4 class="text-xl my-5">Related Posts</h4> <ul class="list-disc list-inside"> <li class="pl-8"> <a href="https://rslhdyt.dev/setting-resource-limits-in-kamal-2/">Setting Resource Limits in Kamal 2 </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/til-handling-changes-to-sidekiq-worker-class/">TIL: Handling Changes to Sidekiq Worker Class </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/fix-dotenv-not-properly-setup-in-foreman/">Fix dotenv not properly setup in Foreman </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/rails-disable-route-format/">Rails Disable Route Format </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/webhookdump-database-design/">WebhookDump: Database Design </a> </li> </ul> </div> <footer class="flex justify-center items-center border-solid border-0 border-t border-gray-200 p-10 mt-10"> Risal Hidayat Â© 2024 </footer> </div> </body> </html>
