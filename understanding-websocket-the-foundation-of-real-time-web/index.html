<!DOCTYPE html> <html lang="en" class="h-full"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LTH48DE8D"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2LTH48DE8D'); </script> <meta charset="utf-8"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=author content="Risal Hidayat"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Understanding WebSocket: The Foundation of Real-time Web | Risal Hidayat</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Understanding WebSocket: The Foundation of Real-time Web" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Discover WebSocket’s evolution from jQuery polling days. Learn how this technology enables real-time web applications with efficient two-way communication and practical code examples." /> <meta property="og:description" content="Discover WebSocket’s evolution from jQuery polling days. Learn how this technology enables real-time web applications with efficient two-way communication and practical code examples." /> <link rel="canonical" href="https://rslhdyt.dev/understanding-websocket-the-foundation-of-real-time-web/" /> <meta property="og:url" content="https://rslhdyt.dev/understanding-websocket-the-foundation-of-real-time-web/" /> <meta property="og:site_name" content="Risal Hidayat" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2024-03-31T17:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Understanding WebSocket: The Foundation of Real-time Web" /> <meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-03-31T17:00:00+00:00","datePublished":"2024-03-31T17:00:00+00:00","description":"Discover WebSocket’s evolution from jQuery polling days. Learn how this technology enables real-time web applications with efficient two-way communication and practical code examples.","headline":"Understanding WebSocket: The Foundation of Real-time Web","mainEntityOfPage":{"@type":"WebPage","@id":"https://rslhdyt.dev/understanding-websocket-the-foundation-of-real-time-web/"},"url":"https://rslhdyt.dev/understanding-websocket-the-foundation-of-real-time-web/"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="https://rslhdyt.dev/assets/images/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="https://rslhdyt.dev/assets/images/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="https://rslhdyt.dev/assets/images/favicon/favicon-16x16.png"> <link rel="manifest" href="https://rslhdyt.dev/site.webmanifest"> <link rel="alternate" type="application/rss+xml" title="Risal Hidayat" href="https://rslhdyt.dev/feed.xml" /> <script src="https://kit.fontawesome.com/d9b09040a7.js" crossorigin="anonymous"></script> <!-- highlight.js --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css" integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script> <script>hljs.highlightAll();</script> <link rel="stylesheet" href="/assets/css/main.css"> </head> <body class="bg-zinc-50 flex h-full"> <div class="max-w-[600px] flex flex-col mx-auto w-11/12"> <nav class=" mt-7 md:mt-10 mb-10"> <ul class="flex flex-row justify-center space-x-6 text-l text-gray-500"> <li> <a href="https://rslhdyt.dev/">Home</a> </li> <li> <a href="https://rslhdyt.dev/blog">Blog</a> </li> <li class="item hidden sm:block"> <a href="https://rslhdyt.dev/code_snippet">Code Snippet</a> </li> <li> <a href="https://rslhdyt.dev/projects">Projects</a> </li> <li> <a href="https://rslhdyt.dev/about">About</a> </li> </ul> </nav> <h1 class="text-3xl text-center tracking-tight font-bold mb-5">Understanding WebSocket: The Foundation of Real-time Web</h1> <span class="block text-center mb-5"> <time datetime="31-03-2024">Sunday. March 31, 2024</time> - <span class="reading-time" title="Estimated read time"> 4 mins read </span> </span> <div class="flex flex-row space-x-1.5 justify-center mb-10"> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/websocket">websocket</a> </div> <div class="posts"> <p><img src="https://images.unsplash.com/photo-1630314845863-8713669311cf?ixlib=rb-4.0.3&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb" alt="" /> <em><a href="https://unsplash.com/photos/black-and-brown-speaker-on-white-table-kocaTDWhD7E?utm_source=63921&amp;utm_medium=referral">https://unsplash.com/photos/black-and-brown-speaker-on-white-table-kocaTDWhD7E?utm_source=63921&amp;utm_medium=referral</a></em></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/v/abc-123/requests</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> 
	    <span class="nx">updateRequestsList</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> 
    <span class="p">})</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">)</span>
</code></pre></div></div> <p>Remember that line of code? Ahh jQuery, the good old days 😄</p> <p>Back in the day, this was how I made my first “real-time” web application. Every 5 seconds, jQuery would ask the server, “Hey, do you have any new data?” We called it polling, and honestly, at that time, it felt like magic! The page would update without refreshing - well, kind of.</p> <p>The problems started when more users began using the app. The server got bombarded with requests every 5 seconds, and users complained that updates were slow. Some even missed important messages because they arrived between polling intervals.</p> <p>That’s when I learned about WebSocket. It completely changed how I build real-time features, and today I want to share what I learned before we add it to WebhookDump. Trust me - it’s way better than our old jQuery polling days!</p> <h2 id="how-websocket-makes-things-better">How WebSocket Makes Things Better</h2> <p>WebSocket fixes this problem in a clever way. Instead of asking for updates over and over, your browser and the server create a connection that stays open, like a phone call. Once connected, they can share information anytime they want.</p> <p>I like to explain it to my friends like this: Imagine you’re waiting for a package. The old way is like calling the delivery company every few minutes to ask, “Is my package here yet?” WebSocket is like having the delivery person call you the moment your package arrives.</p> <h2 id="what-actually-happens-behind-the-scene">What Actually Happens Behind the Scene?</h2> <p>Let me show you how WebSocket works. It starts with something called a “handshake” - yes, just like when we meet someone new 😄</p> <p><img src="/assets/images/posts/36a849f3-5f3b-4c40-8659-65a6038c4685-image.png" alt="" /></p> <p>Here’s what’s happening:</p> <ol> <li>First Contact <ul> <li>Your browser sends a special HTTP request to the server</li> <li>It’s like saying “Hey, I know we’re talking HTTP now, but can we switch to WebSocket?”</li> <li>This request includes special headers like <code class="language-plaintext highlighter-rouge">Upgrade: websocket</code></li> </ul> </li> <li>Server Agreement <ul> <li>If the server supports WebSocket, it replies “Sure, let’s switch!”</li> <li>The response has a special code: 101 (Switching Protocols)</li> <li>Now both sides upgrade their connection from HTTP to WebSocket</li> </ul> </li> <li>The Open Line <ul> <li>After the handshake, the connection stays open</li> <li>Both sides can send messages whenever they want</li> <li>Messages can be text or binary data</li> <li>Each message is called a “frame” in WebSocket terms</li> </ul> </li> </ol> <h2 id="why-this-is-cool">Why This is Cool</h2> <p>The WebSocket connection has some nice features:</p> <ul> <li>It’s full-duplex (both sides can talk at the same time)</li> <li>It has very little overhead (just a few extra bytes per message)</li> <li>It works through firewalls because it starts as a regular HTTP connection</li> <li>The connection stays alive as long as both sides want</li> </ul> <h2 id="real-world-example">Real World Example</h2> <p>Let’s look at some basic JavaScript code to use WebSocket:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Opening a connection</span>
<span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws://example.com/socket</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Sending a message</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">chat</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello!</span><span class="dl">'</span>
<span class="p">}));</span>

<span class="c1">// Receiving messages</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Got message:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Handling connection status</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connected!</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">socket</span><span class="p">.</span><span class="nx">onclose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connection closed</span><span class="dl">'</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div> <p>No more polling! 🎉 When the server has new data, it just sends it through the open connection. This is perfect for:</p> <ul> <li>Chat applications</li> <li>Live sports scores</li> <li>Stock price updates</li> <li>Multiplayer games</li> </ul> <p>If you’re curious about WebSocket in action, try opening your browser’s developer tools on a chat app like Slack or Discord. Look at the Network tab - you’ll spot these WebSocket connections doing their magic!</p> <p>On a related note, I recently implemented WebSocket in my project called WebhookDump. It’s a simple tool that helps developers test and inspect webhook requests in real-time. If you’re interested, head over to webhookdump.link to check it out, or stay tuned for my next posts where I share my journey building it!</p> <p>Happy coding! 🚀</p> <p><br /></p> </div> <div class="grid grid-cols-2 text-sm"> <a class="prev" href="https://rslhdyt.dev/handling-incoming-webhooks-the-controller-layer/">&laquo; Handling Incoming Webhooks: The Controller Layer</a> <a class="next" href="https://rslhdyt.dev/til-handling-changes-to-sidekiq-worker-class/">TIL: Handling Changes to Sidekiq Worker Class &raquo;</a> </div> <div class="related"> </div> <footer class="flex justify-center items-center border-solid border-0 border-t border-gray-200 p-10 mt-10"> Risal Hidayat © 2024 </footer> </div> </body> </html>
