<!DOCTYPE html> <html lang="en" class="h-full"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LTH48DE8D"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2LTH48DE8D'); </script> <meta charset="utf-8"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=author content="Risal Hidayat"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>How to Create a Copy-to-Clipboard Action in Stimulus | Risal Hidayat</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="How to Create a Copy-to-Clipboard Action in Stimulus" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="The code snippet to add functionality copy text to clipboard using stimulus rails" /> <meta property="og:description" content="The code snippet to add functionality copy text to clipboard using stimulus rails" /> <link rel="canonical" href="https://rslhdyt.dev/how-to-create-a-copy-to-clipboard-action-in-stimulus/" /> <meta property="og:url" content="https://rslhdyt.dev/how-to-create-a-copy-to-clipboard-action-in-stimulus/" /> <meta property="og:site_name" content="Risal Hidayat" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2023-12-30T17:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="How to Create a Copy-to-Clipboard Action in Stimulus" /> <meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-12-30T17:00:00+00:00","datePublished":"2023-12-30T17:00:00+00:00","description":"The code snippet to add functionality copy text to clipboard using stimulus rails","headline":"How to Create a Copy-to-Clipboard Action in Stimulus","mainEntityOfPage":{"@type":"WebPage","@id":"https://rslhdyt.dev/how-to-create-a-copy-to-clipboard-action-in-stimulus/"},"url":"https://rslhdyt.dev/how-to-create-a-copy-to-clipboard-action-in-stimulus/"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="https://rslhdyt.dev/assets/images/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="https://rslhdyt.dev/assets/images/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="https://rslhdyt.dev/assets/images/favicon/favicon-16x16.png"> <link rel="manifest" href="https://rslhdyt.dev/site.webmanifest"> <link rel="alternate" type="application/rss+xml" title="Risal Hidayat" href="https://rslhdyt.dev/feed.xml" /> <script src="https://kit.fontawesome.com/d9b09040a7.js" crossorigin="anonymous"></script> <!-- highlight.js --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css" integrity="sha512-Vj6gPCk8EZlqnoveEyuGyYaWZ1+jyjMPg8g4shwyyNlRQl6d3L9At02ZHQr5K6s5duZl/+YKMnM3/8pDhoUphg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script> <script>hljs.highlightAll();</script> <link rel="stylesheet" href="/assets/css/main.css"> </head> <body class="bg-zinc-50 flex h-full"> <div class="max-w-[600px] flex flex-col mx-auto w-11/12"> <nav class=" mt-7 md:mt-10 mb-10"> <ul class="flex flex-row justify-center space-x-6 text-l text-gray-500"> <li> <a href="https://rslhdyt.dev/">Home</a> </li> <li> <a href="https://rslhdyt.dev/blog">Blog</a> </li> <li class="item hidden sm:block"> <a href="https://rslhdyt.dev/code_snippet">Code Snippet</a> </li> <li> <a href="https://rslhdyt.dev/projects">Projects</a> </li> <li> <a href="https://rslhdyt.dev/about">About</a> </li> </ul> </nav> <h1 class="text-3xl text-center tracking-tight font-bold mb-5">How to Create a Copy-to-Clipboard Action in Stimulus</h1> <span class="block text-center mb-5"> <time datetime="30-12-2023">Saturday. December 30, 2023</time> - <span class="reading-time" title="Estimated read time"> 2 mins read </span> </span> <div class="flex flex-row space-x-1.5 justify-center mb-10"> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/code-snippet">code_snippet</a> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/rails">rails</a> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/stimulus">stimulus</a> </div> <div class="posts"> <p>Hello, fellow coders! Today, we’re going to explore a handy code snippet that allows you to copy content to the clipboard using Stimulus.</p> <h2 id="pre-requisites"><strong>Pre-requisites</strong></h2> <p>To get the most out of this snippet, you should be familiar with JavaScript and have a basic understanding of the Stimulus framework.</p> <h2 id="code-snippet">Code Snippet</h2> <p>Create a stimulus controller</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app/javascript/controllers/clipboard_controller.js</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">stimulus</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
  <span class="nx">copyFromText</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
    <span class="kd">const</span> <span class="nx">textToCopy</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">innerText</span>

    <span class="nb">navigator</span><span class="p">.</span><span class="nx">clipboard</span><span class="p">.</span><span class="nx">writeText</span><span class="p">(</span><span class="nx">textToCopy</span><span class="p">).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// optional, you also can add toasr message</span>
			<span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Copied to clipboard</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Could not copy text: </span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>This is a Stimulus controller with a single <code class="language-plaintext highlighter-rouge">copy</code> action. When this action is invoked (for example, by clicking a button), it prevents the default action from occurring with <code class="language-plaintext highlighter-rouge">event.preventDefault()</code>. It then uses the <code class="language-plaintext highlighter-rouge">navigator.clipboard.writeText</code> function to copy the text from the <code class="language-plaintext highlighter-rouge">data-clipboard-text</code> attribute of the target element to the clipboard.</p> <h3 id="usage">Usage</h3> <p>To use this controller in your Stimulus application, you would first add a <code class="language-plaintext highlighter-rouge">data-controller</code> attribute to the element that should trigger the copy action. You would also add a <code class="language-plaintext highlighter-rouge">data-action</code> attribute to specify that the <code class="language-plaintext highlighter-rouge">copy</code> action should be invoked on click.</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-controller=</span><span class="s">"clipboard"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p</span> <span class="na">data-action=</span><span class="s">"click-&gt;clipboard#copyFromText"</span><span class="nt">&gt;</span>
    Text to copy
	<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <h2 id="conclusion"><strong>Conclusion</strong></h2> <p>And there you have it! With this simple Stimulus controller, you can easily add copy-to-clipboard functionality to your web application. Try it out and see how it can enhance your user experience.</p> <p>Did you find this snippet useful? Do you have any questions or suggestions for improvement? Let us know in the comments below. And stay tuned for more code snippets coming your way!</p> <p>That’s it! You should now have a simple copy-to-clipboard feature in your Rails application using Stimulus. Adjust the code and styles as needed for your specific use case.</p> </div> <div class="related"> <h4 class="text-xl my-5">Related Posts</h4> <ul class="list-disc list-inside"> <li class="pl-8"> <a href="https://rslhdyt.dev/til-handling-changes-to-sidekiq-worker-class/">TIL: Handling Changes to Sidekiq Worker Class </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/fix-dotenv-not-properly-setup-in-foreman/">Fix dotenv not properly setup in Foreman </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/webhookdump-database-design/">WebhookDump: Database Design </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/streamline-your-sidekiq-cron-jobs-with-a-single-worker-class-for-rake-task-invocation/">Streamline Your Sidekiq Cron Jobs with a Single Worker Class for Rake Task Invocation </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/setting-up-a-rails-project-for-webhookdump/">Setting Up a Rails Project for Webhookdump </a> </li> </ul> </div> <footer class="flex justify-center items-center border-solid border-0 border-t border-gray-200 p-10 mt-10"> Risal Hidayat © 2024 </footer> </div> </body> </html>
