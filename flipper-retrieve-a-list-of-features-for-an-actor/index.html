<!DOCTYPE html> <html lang="en" class="h-full"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2LTH48DE8D"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2LTH48DE8D'); </script> <meta charset="utf-8"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=author content="Risal Hidayat"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Flipper: Retrieve a List of Features for an Actor | Risal Hidayat</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Flipper: Retrieve a List of Features for an Actor" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="In this guide, we’ll dig into this scenario, explaining how Flipper acts as the bridge between your frontend and backend. By the end, you’ll know how to use Flipper to take charge of your feature toggles, making your application more adaptable and user-friendly. Let’s make managing feature toggles easy with Flipper!" /> <meta property="og:description" content="In this guide, we’ll dig into this scenario, explaining how Flipper acts as the bridge between your frontend and backend. By the end, you’ll know how to use Flipper to take charge of your feature toggles, making your application more adaptable and user-friendly. Let’s make managing feature toggles easy with Flipper!" /> <link rel="canonical" href="https://rslhdyt.dev/flipper-retrieve-a-list-of-features-for-an-actor/" /> <meta property="og:url" content="https://rslhdyt.dev/flipper-retrieve-a-list-of-features-for-an-actor/" /> <meta property="og:site_name" content="Risal Hidayat" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2023-11-20T17:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Flipper: Retrieve a List of Features for an Actor" /> <meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-11-20T17:00:00+00:00","datePublished":"2023-11-20T17:00:00+00:00","description":"In this guide, we’ll dig into this scenario, explaining how Flipper acts as the bridge between your frontend and backend. By the end, you’ll know how to use Flipper to take charge of your feature toggles, making your application more adaptable and user-friendly. Let’s make managing feature toggles easy with Flipper!","headline":"Flipper: Retrieve a List of Features for an Actor","mainEntityOfPage":{"@type":"WebPage","@id":"https://rslhdyt.dev/flipper-retrieve-a-list-of-features-for-an-actor/"},"url":"https://rslhdyt.dev/flipper-retrieve-a-list-of-features-for-an-actor/"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="https://rslhdyt.dev/assets/images/favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="https://rslhdyt.dev/assets/images/favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="https://rslhdyt.dev/assets/images/favicon/favicon-16x16.png"> <link rel="manifest" href="https://rslhdyt.dev/site.webmanifest"> <link rel="canonical" href="https://rslhdyt.dev/flipper-retrieve-a-list-of-features-for-an-actor/"> <link rel="alternate" type="application/rss+xml" title="Risal Hidayat" href="https://rslhdyt.dev/feed.xml" /> <script src="https://kit.fontawesome.com/d9b09040a7.js" crossorigin="anonymous"></script> <!-- highlight.js --> <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github-dark-dimmed.min.css"> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script> <script>hljs.highlightAll();</script> <link rel="stylesheet" href="/assets/css/main.css"> </head> <body class="bg-zinc-50 flex h-full"> <div class="max-w-[600px] flex flex-col mx-auto w-11/12"> <div class="post"> <nav class=" mt-7 md:mt-10 mb-10"> <ul class="flex flex-row justify-center space-x-6 text-l text-gray-500"> <li> <a href="https://rslhdyt.dev/">Home</a> </li> <li> <a href="https://rslhdyt.dev/blog">Blog</a> </li> <li class="item hidden sm:block"> <a href="https://rslhdyt.dev/code_snippet">Code Snippet</a> </li> <li> <a href="https://rslhdyt.dev/about">About</a> </li> </ul> </nav> <h1 class="text-3xl text-center tracking-tight font-bold mb-5">Flipper: Retrieve a List of Features for an Actor</h1> <span class="block text-center mb-5"> <time datetime="20-11-2023">Monday. November 20, 2023</time> - <span class="reading-time" title="Estimated read time"> 2 mins read </span> </span> <div class="flex flex-row space-x-1.5 justify-center mb-10"> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/tips">tips</a> <a class="bg-gray-200 px-2 rounded-sm font-thin" href="https://rslhdyt.dev/tags/feature-toggle">feature-toggle</a> </div> <p><img src="https://images.unsplash.com/photo-1591106167857-f1f9257e671b?ixlib=rb-4.0.3&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb" alt="" /></p> <p><em>Image from <a href="https://unsplash.com/photos/flock-of-birds-flying-over-the-sea-during-daytime-UDlXygG0pgA?utm_source=63921&amp;utm_medium=referral">Ranae Smith</a> from Unsplash</em></p> <p>When your frontend is a SPA, dealing with feature toggles can be confusing. The challenge is making sure the frontend can access and control these toggles without making things too complicated.</p> <p>Let’s say you want to use Flipper to centralize your feature toggles. You could use the backend or Flipper UI as a sort of control center. Your aim? To effortlessly display all available feature toggles for a specific user. You might decide to showcase these toggles on a user’s profile, reachable through an endpoint like /profile.</p> <p>In this guide, we’ll dig into this scenario, explaining how Flipper acts as the bridge between your frontend and backend. By the end, you’ll know how to use Flipper to take charge of your feature toggles, making your application more adaptable and user-friendly. Let’s make managing feature toggles easy with Flipper!</p> <p>The profile endpoint</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">profile</span>
	<span class="n">render</span> <span class="ss">json: </span><span class="n">current_user</span>
<span class="k">end</span>
</code></pre></div></div> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Foo"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"foo@example.com"</span><span class="p">,</span>
  <span class="o">...</span>
<span class="p">}</span>
</code></pre></div></div> <h3 id="retrieve-a-list-of-features-by-actor">Retrieve a list of features by actor</h3> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Flipper</span><span class="p">.</span><span class="nf">features</span><span class="p">.</span><span class="nf">inject</span><span class="p">({})</span> <span class="k">do</span> <span class="o">|</span><span class="nb">hash</span><span class="p">,</span> <span class="n">feature</span><span class="o">|</span>
  <span class="nb">hash</span><span class="p">[</span><span class="n">feature</span><span class="p">.</span><span class="nf">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">featuer</span><span class="p">.</span><span class="nf">enabled?</span> <span class="no">ACTOR</span>
  <span class="nb">hash</span>
<span class="k">end</span>
</code></pre></div></div> <p>In this code, ensure that you replace <code class="language-plaintext highlighter-rouge">**ACTOR**</code> with the appropriate user or actor identifier in your application. Additionally, consider adding comments for clarity in the code.</p> <p><br /></p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">profile</span>
	<span class="n">render</span> <span class="ss">json: </span><span class="n">current_user_with_features</span>
<span class="k">end</span>

<span class="kp">private</span>

<span class="k">def</span> <span class="nf">current_user_with_features</span>
	<span class="n">current_user</span><span class="p">.</span><span class="nf">merge</span><span class="p">({</span> <span class="ss">features: </span><span class="n">user_features</span> <span class="p">})</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">user_features</span>
	<span class="no">Flipper</span><span class="p">.</span><span class="nf">features</span><span class="p">.</span><span class="nf">inject</span><span class="p">({})</span> <span class="k">do</span> <span class="o">|</span><span class="nb">hash</span><span class="p">,</span> <span class="n">feature</span><span class="o">|</span>
	  <span class="nb">hash</span><span class="p">[</span><span class="n">feature</span><span class="p">.</span><span class="nf">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">feature</span><span class="p">.</span><span class="nf">enabled?</span> <span class="n">current_user</span>
    <span class="nb">hash</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <h3 id="output">Output</h3> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Foo"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"foo@example.com"</span><span class="p">,</span>
  <span class="s2">"features"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"ft_document_upload"</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
    <span class="s2">"ft_bulk_export"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
    <span class="o">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div class="grid grid-cols-2 text-sm"> <a class="prev"></a> </div> <div class="related"> <h4 class="text-xl my-5">Related Posts</h4> <ul class="list-disc list-inside"> <li class="pl-8"> <a href="https://rslhdyt.dev/navigating-docker-debugging-challenges-overriding-entrypoint/">Navigating Docker Debugging Challenges: Overriding ENTRYPOINT </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/race-conditions-in-ruby-what-they-are-and-how-to-avoid-them/">Race conditions in Ruby what they are and how to avoid them </a> </li> <li class="pl-8"> <a href="https://rslhdyt.dev/rails-rake-task-hooks/">Rails - Rake Task Hooks </a> </li> </ul> </div> <footer class="flex justify-center items-center border-solid border-0 border-t border-gray-200 p-10 mt-10"> Risal Hidayat © 2024 </footer> </div> </div> </div> </div> </body> </html>
